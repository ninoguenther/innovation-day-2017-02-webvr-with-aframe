<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>aframe</title>

    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script>
    AFRAME.registerComponent('spawner', {
      schema: {
        on: { default: 'click' },
        mixin: { default: '' }
      },

      /**
       * Add event listener.
       */
      update: function (oldData) {
        this.el.addEventListener(this.data.on, this.spawn.bind(this));
      },

      /**
       * Spawn new entity at entity's current position.
       */
      spawn: function () {
        var el = this.el;
        var entity = document.createElement('a-entity');
        var matrixWorld = el.object3D.matrixWorld;
        var position = new THREE.Vector3();
        var rotation = el.getAttribute('rotation');
        var entityRotation;

        position.setFromMatrixPosition(matrixWorld);
        entity.setAttribute('position', position);

        // Have the spawned entity face the same direction as the entity.
        // Allow the entity to further modify the inherited rotation.
        position.setFromMatrixPosition(matrixWorld);
        entity.setAttribute('position', position);
        entity.setAttribute('mixin', this.data.mixin);
        entity.addEventListener('loaded', function () {
          entityRotation = entity.getComputedAttribute('rotation');
          entity.setAttribute('rotation', {
            x: entityRotation.x + rotation.x,
            y: entityRotation.y + rotation.y,
            z: entityRotation.z + rotation.z
          });
        });
        el.sceneEl.appendChild(entity);
      }
    });</script>
</head>
<body>
    <a-scene>

        <a-image src="drone.png" look-at="#player"  position="0 0 -2" transparent="true" scale="1 2 1"></a-image>

        <a-camera spawner="mixin: laser; on: click" click-listener></a-camera>
        <a-sky color="#ECECEC"></a-sky>
    </a-scene>

    <script>

    </script>
</body>
</html>
